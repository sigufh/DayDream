# 浮光梦境 DayDream

一款沉浸式梦境日记 iOS 应用，用声音捕捉梦的碎片，让 AI 将其编织成诗意的画面与文字。

## 功能概览

### 启动与引导
- **启动页** — 极简 logo 动画，珍珠白底色搭配极光紫辉光环
- **导引教学** — 四页横滑卡片，逐字打字机文字揭示，支持跳过

### 往昔画壁（画廊）
- 瀑布流双列布局，自定义 SwiftUI `Layout` 协议实现
- 梦境卡片展示梦境图片、诗句摘录、情绪色条
- 空状态引导提示
- 工具栏快捷入口：历流年、说书人

### 光球交互
- 画廊底部悬浮半透明光球
- 闲置时脉冲缩放动画 + 环绕粒子
- 长按 0.8 秒触发粒子迸发，进入录音流程

### 听云语（语音捕捉）
- 全屏沉浸暮光蓝背景 + SpriteKit 粒子场景
- 中央星球节点，80-120 颗环绕粒子
- 说话时粒子向心收缩，沉默时粒子向外飘散
- 星球颜色在五种情绪色间轮转
- 轻触星球 → 涟漪扩散 → 颜色锁定 → 录音结束
- AVAudioRecorder 录音 + SFSpeechRecognizer 实时转写

### 浮光拓印（AI 处理）
- 模拟 AI 生成延迟，返回情绪相关诗句与画面
- 冲洗照片动画：模糊→清晰渐显
- 诗句打字机逐字浮现
- 位置与天气水印
- 支持「重新洗相」重新生成

### 光景策展（策展编辑）
- 图片拖拽、缩放手势编辑
- 文字叠层拖拽与缩放
- 日期/地点/天气水印开关
- 保存至 SwiftData + 相册「浮光梦境」专属相簿
- 分享功能

### 梦境详情
- 3:4 卡片居中展示
- 正面：梦境图 + 诗句 + 水印
- 背面：反思问题 + 情绪标签 + 梦境符号
- 轻触 Y 轴 3D 翻转，弹性动画

## 设计系统

### 核心色彩
| 色彩 | 色值 | 用途 |
|------|------|------|
| 珍珠白 | `#FDFCF8` | 主背景 |
| 暮光青蓝 | `#1A2A3A` | 沉浸深色背景 |
| 极光薰衣紫 | `#D1C4E9` | 强调色、交互元素 |
| 烟灰 | `#4A4A4A` | 正文文字 |

### 情绪主题
| 情绪 | 中文 | 渐变色系 |
|------|------|----------|
| Serenity | 宁静 | 青绿色系 |
| Melancholy | 忧郁 | 紫色系 |
| Anxiety | 焦虑 | 橙色系 |
| Hope | 希望 | 金色系 |
| Whimsy | 奇幻 | 极光色系 |

### 季节主题
春（粉绿）、夏（翠黄）、秋（暖红）、冬（冷蓝）

## 技术架构

- **UI 框架**: SwiftUI
- **数据持久化**: SwiftData（本地存储）
- **粒子动画**: SpriteKit
- **音频录制**: AVFoundation
- **语音识别**: Speech 框架
- **相册管理**: PhotosUI
- **定位服务**: CoreLocation
- **导航模式**: NavigationStack + fullScreenCover 模态流
- **状态管理**: @Observable + Environment 注入

## 项目结构

```
daydream/
├── daydreamApp.swift              # 应用入口
├── Models/                        # SwiftData 数据模型
│   ├── Dream.swift               # 梦境模型
│   ├── UserProfile.swift         # 用户档案
│   └── Divination.swift          # 占卜记录
├── Core/
│   ├── Design/                   # 设计系统（色彩、字体、间距、情绪/季节主题）
│   ├── Navigation/               # 应用状态机与路由
│   ├── Animation/                # SpriteKit 粒子基类与涟漪效果
│   ├── Audio/                    # 录音器与语音转写
│   ├── Network/                  # AI 服务（Mock）
│   └── Storage/                  # 定位、天气、相册管理
├── Views/
│   ├── Splash/                   # 启动页
│   ├── Auth/                     # 登录页（预留）
│   ├── Onboarding/               # 导引教学
│   ├── Gallery/                  # 画廊（瀑布流 + 光球）
│   ├── Detail/                   # 梦境详情（3D 翻转卡片）
│   ├── Capture/                  # 语音捕捉（SpriteKit 粒子）
│   ├── Processing/               # AI 处理（冲洗照片动画）
│   ├── Curation/                 # 策展编辑
│   ├── Chronicles/               # 历流年（预留）
│   ├── Interpreter/              # 说书人（预留）
│   └── Components/               # 公共组件
└── Assets.xcassets/              # 资源目录
```

## 系统要求

- iOS 18.0+
- Xcode 26+
- Swift 5.0

## 后续规划

- **认证系统** — Apple 登录、Google 登录、手机/邮箱登录
- **历流年** — 情绪统计球体、节气时间轴、梦境世界图谱
- **说书人** — 摇一摇落叶占卜、周公解梦 AI 释义
- **国际化** — 中文（主）+ 英文 Localizable.xcstrings
- **性能优化** — 动画流畅度、触觉反馈、无障碍适配

## 许可证

私有项目，保留所有权利。
